<div class="section">
    <div class="container">
        <div class="section-main">
            <div class="reset-password">
                <div class="reset-password-top">
                    <h3>পাসওয়ার্ড ভুলে গেছেন?</h3>
                    <span routerLink="/login"><i class="fa fa-arrow-left"></i></span>
                </div>
                <div class="reset-form">
                    <div *ngIf="hasUser === false" class="not-found-account">
                        <span><i class="fa fa-xmark"></i>Account not found</span>
                    </div>
                    <form [formGroup]="dataForm" (ngSubmit)="onSubmit()">
                        <div class="form-input">
                            <input 
                                type="text" 
                                placeholder="মোবাইল নাম্বার/ইমেইল"
                                [class]="dataForm.get('username').touched && dataForm.get('username').invalid ? 'invalid' :''"
                                formControlName="username"
                                autocomplete="off"
                                (input)="removeSpaces($event)"
                                [maxlength]="isMobileNumber(dataForm.get('username')?.value) ? 11 : null"
                                pattern="[^\s]*"
                            >
                            <small *ngIf="dataForm.get('username').touched && dataForm.get('username').hasError('invalidInput')">
                                Please enter a valid mobile number or email address
                            </small>
                            <small *ngIf="dataForm.get('username').touched && dataForm.get('username').hasError('invalidEmail')">
                                Please enter a valid email address
                            </small>
                            <small *ngIf="dataForm.get('username').touched && dataForm.get('username').hasError('emailTooLong')">
                                Email address is too long (maximum 254 characters)
                            </small>
                            <small *ngIf="dataForm.get('username').touched && dataForm.get('username').hasError('invalidMobile')">
                                Please enter a valid Bangladesh mobile number (e.g., 01XXXXXXXXX)
                            </small>
                            <small *ngIf="dataForm.get('username').touched && dataForm.get('username').hasError('maxlength')">
                                Mobile number cannot exceed 11 digits
                            </small>
                            <small *ngIf="dataForm.get('username').touched && dataForm.get('username').hasError('required')">
                                This field is required
                            </small>
                        </div>

                        <div class="form-input" *ngIf="isOtpSent">
                            <input 
                                type="number" 
                                placeholder="কোডটি লিখুন"
                                [class]="dataForm.get('otp').touched && dataForm.get('otp').invalid ? 'invalid' :''"
                                formControlName="otp" 
                                [required]="isOtpSent"
                                maxlength="6"
                                pattern="[0-9]*"
                                inputmode="numeric"
                                (input)="onOtpInput($event)"
                            >
                            <small *ngIf="dataForm.get('otp').touched && dataForm.get('otp').hasError('required')">
                                কোডটি প্রয়োজন
                            </small>
                        </div>
                        
                        <div class="form-input password" *ngIf="isOtpSent">
                            <div class="password-area">
                                <p class="label">পাসওয়ার্ড <sup style="color: red;">*</sup></p>
                                <input
                                    [class]="dataForm.get('password').touched && dataForm.get('password').invalid ? 'invalid' :''"
                                    [attr.type]="isPasswordShow ? 'text' : 'password'" 
                                    placeholder="পাসওয়ার্ড (ন্যূনতম ৬ অক্ষর)"
                                    formControlName="password"
                                    [minlength]="6"
                                >
                                <span (click)="onShowPassword()">
                                    <i [class]="isPasswordShow ? 'fa fa-eye-slash' : 'fa fa-eye'"></i>
                                </span>
                            </div>
                            <small *ngIf="dataForm.get('password').touched && dataForm.get('password').hasError('required')">
                                পাসওয়ার্ড প্রয়োজন
                            </small>
                            <small *ngIf="dataForm.get('password').touched && dataForm.get('password').hasError('minlength')">
                                পাসওয়ার্ড কমপক্ষে ৬ অক্ষর হতে হবে
                            </small>
                        </div>

                        <div class="form-sub">
                            <button *ngIf="!isLoading" type="submit">Submit</button>
                            <button *ngIf="isLoading" type="button">Please wait...</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
